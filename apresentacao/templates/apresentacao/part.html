{% extends 'base-presentation.html' %}

{% load thumbnail %}

{% block title %}
    Bem-vindo ao museu {{ informations.nome|lower }}
{% endblock %}

{% block header %}
    {% include 'apresentacao/partials/header.html' %}
{% endblock %}

{% block container %}
    <div id='container' class='clearfix'>
        <div class='row collapse'>
            <div class='large-24 row'>
                <section class='info-column'>
                    <ul class='row'>
                        {% if part.imagens %}
                            <li class="small-6 column">
                                <a href='/apresentacao/part/{{ part.pk }}/collectanea/{{ collectanea.pk }}/photos' {% if section == 'photos' %} class='active' {% endif %}>Fotos</a>
                            </li>
                        {% endif %}
                        {% if part.videos %}
                            <li class="small-6 column">
                                <a href='/apresentacao/part/{{ part.pk }}/collectanea/{{ collectanea.pk }}/videos' {% if section == 'videos' %} class='active' {% endif %}>Vídeos</a>
                            </li>
                        {% endif %}
                        {% if part.audios %}
                            <li class="small-6 column">
                                <a href='/apresentacao/part/{{ part.pk }}/collectanea/{{ collectanea.pk }}/audios' {% if section == 'audios' %} class='active' {% endif %}>Áudios</a>
                            </li>
                        {% endif %}
                        {% if part.documentos %}
                            <li class="small-6 column">
                                <a href='/apresentacao/part/{{ part.pk }}/collectanea/{{ collectanea.pk }}/documents' {% if section == 'documents' %} class='active' {% endif %}>Documentos</a>
                            </li>
                        {% endif %}
                    </ul>
                </section>
            </div>
            <div class='large-24 rows'>
                <section>
                   <!--  <header class='row'>
                        {% if section == 'photos' %}
                            <h4>Fotos</h4>
                        {% elif section == 'videos' %}
                            <h4>Vídeos</h4>
                        {% elif section == 'audios' %}
                            <h4>Áudios</h4>
                        {% elif section == 'documents' %}
                            <h4>Documentos</h4> 
                        {% elif section == 'iphan-informations' %}
                            <h4>Informações do IPHAN</h4>
                        {% endif %}
                    </header> -->
                    <div class='row' style="text-align:center">
                        {% if section == 'photos' %}
                            {% for image in part.imagens.all %}
                                <div class="small-6 column left" style="padding:10px">
                                {% thumbnail image.imagem "800x600" as im_big %}
                                    {% thumbnail image.imagem "200x200" crop="center"   as im %}
                                        <a href="javascript:" data-role="light-box" >
                                            <img 
                                                src="{{ im.url }}" 
                                                data-img="{{ im_big.url }}"
                                                data-autor="{{ image.autor }}"
                                                data-descricao="{{ image.descricao }}" />
                                        </a>
                                        <!-- <div style="text-align:left">Autor: {{image.autor }}</div>
                                        <div style="text-align: justify">Descrição: {{ image.descricao }}
                                        </div> -->
                                    {% endthumbnail %}
                                {% endthumbnail %}
                                </div>
                            {% endfor %}
                        {% elif section == 'videos' %}
                            {% for video in part.videos.all %}
                                {% if video.video %}
                                    <video class='column' controls>
                                        <source src='/media/{{ video.video }}' type='video/mp4'>
                                        <source src='/media/{{ video.video }}' type='video/ogg'>
                                        <p>Seu navegador não suporta vídeos H.264/MP4.</p>
                                    </video>
                                {% elif video.youtube %}
                                    <iframe src='{{ video.youtube }}' width='560' height='315' frameborder='0' allowfullscreen></iframe>
                                {% elif video.vimeo %}
                                    <iframe src='{{ video.vimeo }}' width='560' height='315' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                                {% endif %}
                            {% endfor %}
                        {% elif section == 'audios' %}
                            {% for audio in part.audios.all %}
                                <audio class='column' controls>
                                    <source src='/media/{{ audio.audio }}' type="audio/ogg">
                                    <source src='/media/{{ audio.audio }}'type="audio/mpeg">
                                    <p>Seu navegador não suporta àudios.</p>
                                </audio>
                            {% endfor %}
                        {% elif section == 'documents' %}
                            {% for document in part.documentos.all %}
                                <embed class='large-24 large-centered column' height='700' src='/media/{{ document.documento }}' alt='pdf' pluginspage='http://www.adobe.com/products/acrobat/readstep2.html'>
                            {% endfor %}
                        {% endif %}
                    </div>
                </section>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(function(){
            $(".light-box").css({height:$(document).height()});
            $(document).on("click", "a[data-role='light-box']", function(){
                $("a[data-role='light-box']").removeClass("active");
                $(this).addClass("active");
                $(".light-box").find(".media img").attr({
                    src:$(this).find("img").attr("data-img")
                });
                console.log($(".light-box").find(".media .autor strong"))
                $(".light-box").find(".media .autor strong").text($(this).find("img").attr("data-autor"));
                $(".light-box").find(".media .descricao p").text($(this).find("img").attr("data-descricao"));
                $(".light-box").fadeIn();
            })
            $(document).on("click", ".light-box .shadow, .light-box .container", function(){
                $(".light-box").fadeOut();
            });
        })
    </script>
{% endblock %}

{% block footer %}
    {% include 'apresentacao/partials/footer.html' %}
{% endblock %}


{% block css %}
{% endblock %}

{% block js %}
{% endblock %}